---
title: "Git(Hub)"
output: 
  html_document:
    toc: TRUE
---

<style>
/* Increase vertical space between TOC items */
.tocify-item.list-group-item {
  padding-top: 12px;
  padding-bottom: 20px;
  line-height: 1.6;
}

/* Increase vertical space before a new header */
.section h1 {
    padding-top: 50vh; /* units: % of vertical height of the browser window */
  }

/* the source code is hard to see, let's make it bold */
.sourceCode.r {
  font-weight: bold;
}

/* define custom colours used for action blocks & buttons */
  :root {
    --action-color: #FFDF64;
    --action-contrast: #877b66;
  }
</style>

<div style="margin-top: -47vh;"></div>

# Attribution

This module is based on the ["Version control with Git" lesson](https://swcarpentry.github.io/git-novice/) developed by [The Carpentries](https://carpentries.org/) under CC BY-SA 4.0: modifications were made to explain how Git is used with GitHub Desktop.

I strongly recommend walking yourself through [their lesson](https://swcarpentry.github.io/git-novice/) if you want to learn more about Git.


# Learning Goals

* What is Git & how can I track my changes locally?

* What is GitHub & how can I track my changes remotely?

* How are Git & GitHub related to [the reproducibility practices we learned about in the first half](reproducibility_half.html)?


# Version control

Keeping track of the changes made to a document can go like:

<div align="center">
![](https://swcarpentry.github.io/git-novice/fig/phd101212s.png){width=35%}
</div>

<div style="margin-top: 10vh;"></div>

Programs can automatically track the changes made to a document (e.g., Google docs):

<div align="center">
![](./figures/git_changes_versions.svg){width=90% title="Figure modified from https://swcarpentry.github.io/git-novice"}
</div>

<div style="margin-top: 20vh;"></div>

## What is Git?

<div align="center">
![](./figures/git_repository.svg){width=90% title="Figure modified from https://swcarpentry.github.io/git-novice"}
</div>


<p style="font-size: 18px;">*Git tracks the changes made to all files and subfolders* contained in a specific parent folder, called the **repository**.</p>

<div style="margin-top: 10vh;"></div>

For *text files*, Git lets you see line-by-line changes:\

<p align="center">
![](./figures/git_change_to_text_file.png){width=35%}
</p>

For *non-text files*, Git indicates that files were changed:\

<p align="center">
![](./figures/git_change_to_nontext_file.png){width=50%}
</p>

<div style="margin-top: 10vh;"></div>

> Git can be used locally on your computer\
> &nbsp;&nbsp;&nbsp; **AND**\
> Git can be synchronized with a server so that data & changes are backed up to the cloud.

<div align="center">
![](./figures/git_on_the_cloud.svg){width=90% title="Figure modified from https://swcarpentry.github.io/git-novice"}
</div>

<div style="margin-top: 10vh;"></div>

# Using Git Locally

Git can be run via command line ([see tutorial here](https://swcarpentry.github.io/git-novice/01-basics.html)) but we will use GitHub Desktop.

<div style="background-color: var(--action-color); padding: 20px; margin-bottom: 20vh;">

## Exercise 1. Stash

* Download and **install GitHub Desktop** at this link: [https://github.com/apps/desktop](https://github.com/apps/desktop)

  - To complete the installation, you will also have to create an account on [GitHub.com](https://github.com/). Your username will be public.
  
  - After you make your GitHub account, authenticate GitHub Desktop by going to\
  **File âžœ Options... âžœ Accounts    âžœ     Sign Into GitHub.com**

<p align="center">
![](./figures/git_setup_GitHub_Desktop.png){width=50%}
<br><br>
![](./figures/github_signin.png){width=30%}
<br><br>
![](./figures/github_signin2.png){width=25%}
</p>

* Download this GitHub repository to your local computer: [EvoNerd/THEE_2025reproducibility](https://github.com/EvoNerd/THEE_2025reproducibility)\
**Add âžœ Clone repository...     âžœ    URL**

<p align="center">
![](./figures/git_clone_repo.png){width=35%}
<br><br>
![](./figures/git_clone_repo_URL.png){width=60%}
</p>

* Open the "THEE_2025reproducibility" folder locally on your computer (i.e., using File Explorer for Windows, or Finder for Mac).

  - GitHub Desktop will probably save the repository to a folder in your Documents that is called "GitHub".
  
  - You can also navigate to the repository from the start page on GitHub Desktop
  
<p align="center">
![](./figures/git_navigate_to_directory.png){width=45%}
</p>
  
* Copy the R Notebook file you created before the break to the new repository.

  - **Do you see any changes on GitHub Desktop?**
  
<p align="center">
![](./figures/git_stash.png){width=40%}
</p>

</div>

GitHub Desktop automatically detects all changes in a repository and adds them to the **staging area**.

> When you decide that you have completed a **stash** of work, then you **commit** the stash to the repository with a message.

<div align="center">
![](https://swcarpentry.github.io/git-novice/fig/git-staging-area.svg){width=90%  title="Figure from https://swcarpentry.github.io/git-novice"}
</div>

The Git repository contains a time-series of commits. This time-series is called a **branch**.

A repository can have more than one branch, but this makes it more difficult to manage. By convention the main branch of a repository is called `main`.

<div style="background-color: var(--action-color); padding: 20px; margin-top: 20vh; margin-bottom: 20vh;">

## Exercise 2. Commit

* Navigate to the GitHub Desktop staging area and commit the R Notebook file you copy/pasted to the repository.

  - GitHub Desktop may prompt you to push to origin or to create a fork -- do **NOT** do either of those things at this time!

<p align="center">
![](./figures/git_commit.png){width=30%}
</p>
  
* Rename the R Notebook file with your firstname and commit this change too.

<p align="center">
![](./figures/git_change_doc_name.png){width=30%}
</p>

* Navigate to the history tab. Can you figure out how to tag the most recent commit?

<p align="center">
![](./figures/git_create_tag.png){width=40%}
</p>

</div>

Some commits are especially important (*e.g.*, the last time your code worked properly, the version of your results that you presented for the final presentation, *etc.*)

> **Tags** let you label these important commits.

It's easier to find and return to a tagged commit.

<div style="background-color: var(--action-color); padding: 20px; margin-top: 20vh; ">

## Exercise 3. Revert

* Tag your most recent commit as `<your firstname's> code`.

<p align="center">
![](./figures/git_tag.png){width=30%}
</p>

* Open your R Notebook file, delete all of its contents, and save the file. *Don't worry! Git will be able to retrieve it for you!*

* Commit the change.

<p align="center">
![](./figures/git_delete_file_contents.png){width=50%}
</p>

* Navigate to the history tab. Can you figure out how to revert the changes made by the most recent commit?

  - **What happens when you revert changes in commit?**

<p align="center">
![](./figures/git_revert_changes.png){width=60%}
<br><br>
![](./figures/git_reverted_change.png){width=30%}
</p>

</div>




# GitHub: Using Git with a Server

Google Docs lets us work collaboratively on the same document -- and so does Git!

GitHub pairs the functionality of Git with a remote server, so we can work collaboratively on the files in a repository.

<p align="center">
![](./figures/git_working_together.svg){width=60% title="Figure modified from https://swcarpentry.github.io/git-novice"}
</p>

By considering each change (**commit**) to a repository as separate, Git can keep track of different versions of the same repository even when they happen on different local computers.

Then, the different versions can be **merged** back together.

<p align="center">
![](https://swcarpentry.github.io/git-novice/fig/merge.svg){width=50%  title="Figure from https://swcarpentry.github.io/git-novice"}
</p>

>*Uploading* your local commits and merging them *to the server* is called **pushing**.

<p align="center">
![](./figures/github_merge.svg){width=80% title="Figure modified from https://swcarpentry.github.io/git-novice"}
</p>

>*Downloading* the most recent commits *from the server* and merging them locally is called **pulling**.

You can also just **fetch**: ask Git to check if there are any new commits on the server. This will neither upload or download any changes from/to your local computer.

<div style="background-color: var(--action-color); padding: 20px; margin-top: 20vh; margin-bottom: 20vh;">

## Exercise 4. Push & Pull

* Send Hermina your GitHub username or email. You should soon receive an email invite to collaborate on the repository.

<p align="center">
![](./figures/github_invite_to_collab.png){width=60%}
<br><br>
![](./figures/github_invite_to_collab2.png){width=30%}
</p>


* **Push** your local changes to GitHub's server by clicking "Push to Origin".

<p align="center">
![](./figures/github_push.png){width=80%}
</p>

* If you try to push but GitHub finds that your local computer does not have the latest commits, it will automatically ask you to **pull** so your local computer is up-to-date.

<p align="center">
![](./figures/github_fetch.png){width=60%}
<br><br>
![](./figures/github_pull.png){width=80%}
</p>

* Keep trying to push until you have successfully synchronized your R Notebook file with origin.

* Keep trying to fetch and pull until you have have downloaded all the R Notebook files of the whole class to your local computer.

* Check out how many tags we have now on the repository! You can easily find tagged commits via the GitHub website.

<p align="center">
![](./figures/github_tags.png){width=50%}
</p>

</div>

For text documents, Git keeps track of changes based on the name and line number of a document.

If different commits modify the same line of the same document, Git does not know how to merge. This creates a **conflict**.

<p align="center">
![](https://swcarpentry.github.io/git-novice/fig/conflict.svg){width=90%  title="Figure from https://swcarpentry.github.io/git-novice"}
</p>

Git(Hub) will try its best to automatically resolve conflicts for you. When it finds a conflict that it cannot figure out how you it should be resolved, it will ask you to resolve it manually.

Committing your changes often and synchronizing them with the server reduces the likelihood of creating conflicts.

<div style="background-color: var(--action-color); padding: 20px; margin-top: 20vh;">

## *Bonus Exercise* Merging Conflicts

* Make a change to the R Notebook file called `reproducibility.Rmd`. Commit the change and push it to GitHub.

  - Did this create a conflict or was Git able to merge it successfully?
  
<p align="center">
![](./figures/github_conflict.png){width=80%}
</p>

  
* Keep making changes, committing, and pushing them until we create a conflict. Let's practice together to merge the conflicts.

* Conflicts can be resolved by telling Git to use all the changes from one commit and drop all the changes from the other commit\
*e.g., we can keep **either** the commit from local main **or** that from GitHub (origin/main)*

<p align="center">
![](./figures/github_resolve_conflict_auto.png){width=80%}
</p>

* If we want to keep some parts from **both** of the conflicting commits, we need to open the document in a code or text editor and manually resolve the conflict. Here's what a conflict looks like in Visual Studio Code. It is resolved manually simply by clicking on the change you want to accept.

<p align="center">
![](./figures/github_resolve_conflict_manual.png){width=100%}
</p>

* Conflicts are scary but we can easily manage them once we learn how ðŸ˜Œ

  - **How can you avoid conflicts?**

<p align="center">
![](./figures/github_resolved_conflict.png){width=60%}
</p>

</div>

<div style="margin-top: 20vh;"></div>

## Ignoring files

Some files are not useful to track but prone to creating conflicts:

- *e.g.,* Files automatically created by your operating system, like`.DS_Store`, `Thumbs.db`, `.Trash`

- *e.g.,* `.RHistory` files ([except for advanced R users](https://www.geeksforgeeks.org/r-language/how-to-access-the-scriptsource-history-in-rstudio/))

You can ignore these file types by going to GitHub Desktop:  **Repository   âžœ  Repository Settings...  âžœ   Ignored files** and typing in a list of the files or filetypes you want to Git to ignore.\
(... and if that doesn't work, check out [this tutorial: link here.](https://docs.github.com/en/get-started/git-basics/ignoring-files))


# Summary

<p align="center">
![](./figures/github_flowchart.svg){width=60%}
</p>

<div style="margin-top: 10vh;"></div>

* Automated version control is useful.

  - You will have to use GitHub during the research practical
  
  - (other options exist. Servers: *GitLab*. Programs: *mercurial, CVS, Subversion*.)

* Git can be used locally for version control.

* Git can be used with an online server (e.g., GitHub)

  - we experimented with how GitHub helps backups & collaboration
  
  - GitHub can also be used to host & distribute projects\
  *e.g., [this website is hosted on GitHub](https://github.com/EvoNerd/THEE_2025reproducibility) on the branch called "website"*

<div style="margin-top: 40vh;"></div>

* Coupling Git with an online server makes reproducibility easy:


<div align="center"><p style="font-size: 24px;">
  [Hoard](reproducibility_half.html#3_Hoard_)
  <img src="./figures/hoarder_icon.png" style="width: 20%; margin-left: 5vw;" />
</p></div>

<div align="center"><p style="font-size: 24px;">
  <img src="./figures/share_icon.png" style="width: 20%; margin-right: 5vw;" />
  [Share](reproducibility_half.html#4_Share_)
</p></div>

<div style="margin-top: 10vh;"></div>

* How does GitHub help us with the other reproducibility principles?

<div align="center"><p style="font-size: 24px;">
  [Annotate](reproducibility_half.html#1_Annotate_)
  <img src="https://libapps-au.s3-ap-southeast-2.amazonaws.com/accounts/1771/images/annotate.png" style="width: 20%; margin-left: 5vw;" />
</p></div>

<div align="center"><p style="font-size: 24px;">
  <img src="./figures/automate_all_the_things.avif" style="width: 20%; margin-right: 5vw;" />
  [Automate](reproducibility_half.html#2_Automate_)
</p></div>
---
title: "Reproducibility in Action!"
output: 
  html_document:
    toc: TRUE
---

<style>
/* Increase vertical space between TOC items */
.tocify-item.list-group-item {
  padding-top: 12px;
  padding-bottom: 20px;
  line-height: 1.6;
}

/* Increase vertical space before a new header */
.section h1 {
    padding-top: 50vh; /* units: % of vertical height of the browser window */
  }

/* Increase vertical space before a new header */
.section h2 {
    padding-top: 50vh; /* units: % of vertical height of the browser window */
  }

/* the source code is hard to see, let's make it bold */
.sourceCode.r {
  font-weight: bold;
}

/* define custom colours used for action blocks & buttons */
  :root {
    --action-color: #FFDF64;
    --action-contrast: #877b66;
  }
</style>

<div style="margin-top: -47vh;"></div>

# Learning Goals

- What is reproducibility and why should I care?

- 4 principles for reproducible research\
  *Bonus!:* some activities to refresh your R coding skills

- Git and GitHub make it easy to track changes & collaborate



# What is Reproducibility? 

<div align="center">
<iframe src="./slide_decks/reproducibility-intro/theSlides.html"
        style="width: 80%; aspect-ratio: 4 / 3; border: 1px solid var(--action-contrast);"></iframe>
</div>

<div style="margin-top: 3em;"></div>

### Doing Research:

<p align="center">
![](./figures/research_dream_reality.png){width=80%}
</p>

### Having a **Data Management Plan** and good habits gets us closer to the ideal :)




## Doing reproducible research

> **Goal:** being able to re-create the *data and analysis* so that you and others can (ideally) arrive at the *same interpretations* of your results.

<p style="font-size: 18px;">So, should we keep everything?</p>

<div align="center">
![](https://med.stanford.edu/content/dam/sm-news/images/2009/10/sustain-freezer-101909.jpg){width=35%}
<p style="font-size: 24px; color: #333333;"> Nobody wants to deal with this!</p>
</div>



# Reproducibility Principles

> **Goal:** being able to re-create the *data and analysis* so that you and others can (ideally) arrive at the *same interpretations* of your results.

#### ~~Keep everything!~~

#### Keep *almost* everything in such a way that you, or people after you, can (happily?) go back to it.

### 4 reproducibility principles for achieving this are:

<ol> <!-- Force the numbering to be out of order -->
  <li value="1"> **Annotate:** explain what you're doing and why. </li>
  <li value="2"> **Automate:** make your decisions explicit by using code. </li>
  <li value="4"> **Share:** provide access to your work. </li>
  <li value="3"> **Hoard:** ... you will still have to keep *almost* everything ...</li>
</ol>



## 1. Annotate <img src="https://libapps-au.s3-ap-southeast-2.amazonaws.com/accounts/1771/images/annotate.png" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />

### Write explanations for your future collaborators

What? How? *Why?!*

### Habits:

Use script headers, use meaningful & human-readable names, comment your code

### Tools:

notebook documents (e.g., R Notebook (.Rmd) files in RStudio)

<div style="margin-top: 10vh;"></div>

<div style="background-color: var(--action-color); padding: 20px;">

#### Exercise 1.

* Open RStudio and create a new R Notebook document.\

<p align="center">
![](./figures/ex1--open_notebook.png){width=50%}
</p>

* Save it, then Knit it to pdf. **What does this achieve?**

<p align="center">
![](./figures/ex1--knit_notebook.png){width=60%}
</p>

<div style="margin-top: 10vh;"></div>

* Recall annotate habits: use meaningful & human-readable variable names, comment your code, use script headers.

  - How do you achieve that?

  - Type "# Annotate!" both *inside* and *outside* of the R code block.\
  **How are these displayed differently after you knit?**
  
<p align="center">
![](./figures/ex1--annotation.png){width=30%}
</p>

<div style="margin-top: 10vh;"></div>

* Switch the markdown editing mode from Source to Visual.\
What does this do? What new kinds of objects can you now add to your Notebook?

<p align="center">
![](./figures/ex1--visual_mode.png){width=50%}
</p>

<div style="margin-top: 10vh;"></div>

* Modify the header to add new fields for "author:" and "date:"\
What other authorship attribution information may be useful?

<div style="margin-top: 20vh;"></div>

<p align="center">
![](./figures/ex1--header.png){width=80%}
</p>

</div>




## 2. Automate <img src="https://images.lumacdn.com/cdn-cgi/image/format=auto,fit=cover,dpr=2,background=white,quality=75,width=400,height=400/event-covers/yo/f21e0c96-387b-4142-be2b-cb5da5fbc84f.png" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />

### Avoid manual manipulation

waste of time & error-prone\
decisions are <u>not</u> explicit and can be inconsistent

### Habits:

use find+replace, automatically save parameters in the filename, use a scripting language for your analyses.

### Tools:

notebook documents (e.g., R Notebook)


<div style="background-color: var(--action-color); padding: 20px; margin-bottom: 10vh;">

#### Exercise 2.

The window below contains a function (`get.multiples1to10`) that multiplies the integers from 1 to 10 (`1:10`) by a constant value (`multiplier`), which is currently set to `3`. So it should print out ten multiples of 3, from 3 to 30.

**Run the code to convince yourself that it's working properly.**

<!-- This block embeds an interactive R console via RDrr  -->
  <!-- Reload Button on top right -->
  <button id="reloadGoodCode"
        style="float: right; margin-left: 10px; margin-bottom: 10px; font-size: 20px; padding: 10px 25px; border-radius: 7px; border: none; background-color: var(--action-contrast); color: var(--action-color);">
  Please reload the original code!
  </button>
  <!-- iframe (this is the R console) -->
  <iframe id="goodCode"
          src="https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier%20*%20numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)"
          width="100%" height="500" style="display: block; top-margin: 10px, left-margin: auto; right-margin: auto;" frameborder="0"></iframe>

  <!-- JavaScript -->
  <script>
    // this makes the reload button work
    document.getElementById("reloadGoodCode").addEventListener("click", function () {
      const iframe = document.getElementById("goodCode");
      iframe.src = iframe.src; // forces the iframe to reload
    });
  </script>
</div>



<div style="background-color: var(--action-color); padding: 20px; margin-bottom: 10vh;">

#### Exercise 3.

The window below contains a buggy version of the same code.

**Find the bug and fix it so the code runs properly.**

<!-- This block embeds an interactive R console via RDrr  -->
  <!-- Reload Button on top right -->
  <button id="reloadBuggyCode"
        style="float: right; margin-left: 10px; font-size: 20px; padding: 10px 25px; border-radius: 7px; border: none; background-color: var(--action-contrast); color: var(--action-color);">
  Please reload the original code!
  </button>

  <!-- iframe placeholder (this is the R console) -->
  <iframe id="buggyCode"
          width="100%" height="500" style="margin-top: 10px;" frameborder="0"></iframe>
  
  <!-- Sample new bug Button below everything -->
  <button id="sampleNewBug"
        style="font-size: 20px; padding: 10px 25px; border-radius: 7px; border: none; background-color: var(--action-contrast); color: var(--action-color);">
  I fixed it :D  Now give me a new bug to fix!
  </button>

  <!-- JavaScript -->
  <script>
    // reload the current buggy code
    document.getElementById("reloadBuggyCode").addEventListener("click", function () {
      const iframe = document.getElementById("buggyCode");
      iframe.src = iframe.src; // forces iframe to reload
    });
    
    // a list of URLs with buggy codes
    const buggyList = ["https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples110%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 1
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 2 
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%20c(1%2C10)%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 8
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 3
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 4
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20curr_val)%0Aprint(results)", // 5
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%205%3A-5%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 21
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20retrun(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 6
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10%20multiplier%20%3D%20current_value%0Aprint(results)", // 7
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier%2Fnumbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 9
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget!multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get!multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 10
                      "https://rdrr.io/snippets/embed/?code=simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0Adisplay%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 11
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%20.3%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 22
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value%0Aprint(results)", // 12
                      "https://rdrr.io/snippets/embed/?code=%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)%0A%0A%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D", // 13
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier%20%3C-%203)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 14
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Acurrent_value%20%3C%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 23
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function()%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)%0A", // 15
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier%2C%20)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 16
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Afunction%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20function)%0Aprint(results)", // 17
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier%2Bnumbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 24
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 18
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier*numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint%20results", // 19
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier-numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)", // 20
                      "https://rdrr.io/snippets/embed/?code=%23%20simple%20function%20to%20multiply%20integers%20from%201%20to%2010%20by%20parameter%20value%20(%22multiplier%22)%0Aget.multiples1to10%20%3C-%20function(multiplier)%7B%0A%20%20%20numbers%20%3C-%201%3A10%0A%20%20%20return(multiplier-numbers)%0A%7D%0A%0A%23%20display%20results%20for%20parameter%20value%20set%20to%203%0Acurrent_value%20%3C-%203%0Aresults%20%3C-%20get.multiples1to10(multiplier%20%3D%20current_value)%0Aprint(results)"];
    
    // global variable indicating the index
    var theIndex;
    
    // a function to randomly sample an index
    function getRandomIndex() {
      // sample a random number between 0 and 24
      theIndex = (Math.floor(Math.random()*25));
    }
    
    // a function to successively increment index values for button click
    function incrementIndex() {
      // cycle through the numbers from 0 to length of buggyList
      theIndex = (theIndex + 1) % buggyList.length;
    }
    
    // a function to assign the buggy ULR to the src of the iframe
    function updateBuggyURL() {
      document.getElementById("buggyCode").src = buggyList[theIndex];
    }
    
    // Get a random index when the window loads and display its URL
    window.onload = function () {
        getRandomIndex();
        updateBuggyURL();
    };
    
    // click the button to sample a new bug
    document.getElementById("sampleNewBug").addEventListener("click", function () {
      const iframe = document.getElementById("buggyCode");
      incrementIndex();
      updateBuggyURL();
    });

  </script>
</div>

<div style="margin-top: 10vh;"></div>

<div style="background-color: var(--action-color); padding: 20px;">
#### Exercise 4.

Copy and paste the bug-free version of the code below into the R Notebook document that you created in Exercise 1.

```r
# function to multiply integers from 1 to 10 by a parameter value
get.multiples1to10 <- function(multiplier){
   numbers <- 1:10
   return(multiplier * numbers)
}

# display results for parameter value set to 3
current_value <- 3
results <- get.multiples1to10(multiplier = current_value)

# print results to console
print(results)
```

**Use find+replace to change the name of the function from `get.multiples1to10` to a new name that you find more useful** (*e.g.,* easier to type, easier to understand, unique).
</div>


## 3. Hoard <img src="https://lh3.googleusercontent.com/blogger_img_proxy/AEn0k_t3BbtzxyAYqbfzPrSXHDX3IeUrRhU1jPOjjOAkW9k0k8IoG8cmFmbm09_SFb0YM7BZrY6Ji_JDYu9zrZQh1PYXO43WmHGH8S04Ib6NHl5UvVru5mKRtas-k50qmohmAw=s0-d" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />


### Keep *almost* everything

### Habits:

store raw data & intermediate steps in data processing, store code & progress on code, backup regularly (daily!), versions of software & packages

### Tools:

backup software (e.g., OneDrive is free for UniBE students),\
version control (e.g., git), online repositories (e.g., GitHub)

<div style="margin-top: 10vh;"></div>

<div style="background-color: var(--action-color); padding: 20px; margin-bottom: 10vh;">
#### Exercise 5.

It is usually a better idea to write your results to a file rather than just printing them to the console. (Why?)

Return to the R Notebook that you last updated in Exercise 4.\
Use this line of code to write your `results` to a comma separated values (.csv) file called "myResuts.csv":

```r
write.csv(results, filename = "myResults.csv", row.names = FALSE)
```

Do you think this is a good filename for your results? **Why or why not?**

You can store the parameter value in the filename by first using `paste(...)` to create a character string called `the_filename`.

```{r loadCode, message=FALSE, warning=FALSE, include=FALSE}
get.multiples1to10 <- function(multiplier){
   numbers <- 1:10
   return(multiplier * numbers)
}
current_value <- 3
results <- get.multiples1to10(multiplier = current_value)
```

```{r showString, echo=TRUE, message=FALSE, warning=FALSE}
# create filename for results indicating the parameter value that was used
the_filename <- paste("multiples1to10--multiplier", current_value, ".csv")
print(the_filename)
```

Use `the_filename` to write your results to a csv file that contains the parameter value in its name.

Do you think this is a better filename for your results? **Why or why not?**

</div>


<div style="background-color: var(--action-color); padding: 40px;">

#### *Bonus Exercise*

To maximize your automation and hoarding, you can **use a loop** to automatically run multiple parameter values and write the results to separate files, each named with its corresponding parameter value.

The code below will loop over three parameter values: 2, 3, and 4. Figure out how to write the `results` of each parameter value to a separate and appropriately named file.

```r
for(current_value in 2:4){
  ...
}
```

<button id="showAnswerBtn" type="button"
      style="float: right; margin-left: 10px;"
			onclick="document.getElementById('theAnswer').style.display='block';
				     this.style.display='none';
				     document.getElementById('hideAnswerBtn').style.display = 'inline';">
	I give up, just show me the answer!
</button>
	
<button id="hideAnswerBtn" style="display:none;" type="button"
			onclick="document.getElementById('theAnswer').style.display = 'none';
				     this.style.display='none';
				     document.getElementById('showAnswerBtn').style.display = 'inline';">
	Hide the answer again...
</button>

<div id="theAnswer" style="display:none;">

```r
# Function to multiply integers from 1 to 10 by a parameter value
get.multiples1to10 <- function(multiplier){
  numbers <- 1:10
  return(multiplier * numbers)
}

# Loop over parameter values 2, 3, and 4
for(current_value in 2:4){
  # Get the multiples
  results <- get.multiples1to10(multiplier = current_value)
  
  # Construct the filename
  the_filename <- paste("multiples1to10--multiplier", current_value, ".csv")
  
  # Write the vector directly to CSV
  write.csv(results, file = the_filename, row.names = FALSE)
}
```
</div>

</div>

## 4. Share <img src="https://assets.myket.ir/icons/large/com.appattitude.shareapp_f6f6c04e-10fb-4303-a952-0e783d3bfb38.png" class="toc-icon" style="float: right; width: 25%; margin-left: 10px;" />

### Fundamentally, research is about sharing

with collaborators, with other scientists

### Habits:

think about your <u>audience</u> when analyzing (see annotate), share early and often

### Tools:

online repositories for data (e.g., Dryad), code (e.g., GitHub), and papers (e.g., EcoEvoRxiv)


## Summary

  - **Annotate:** explain what you're doing and why.
  - **Automate:** make your decisions explicit by using code.
  - **Hoard:** keep *almost* everything.
  - **Share:** provide access to your work.

#### By implementing these reproducibility principles, your workspace can be more like this:

<p align="center">
![](https://assets.fishersci.com/TFS-Assets/CCG/product-images/F205638~p.eps-650.jpg){width=35%}
</p>

<div style="margin-top: 10vh;"></div>

<div align="center">
<iframe src="./slide_decks/reproducibility-concl/theSlides.html"
        style="width: 80%; aspect-ratio: 4 / 3; border: 1px solid var(--action-contrast);"></iframe>
</div>



# Intro to Git(Hub)

<div style="margin-top: -47vh;"></div>

## Version control

Keeping track of changes to documents:

<div align="center">
![](https://swcarpentry.github.io/git-novice/fig/phd101212s.png){width=35%}
</div>

Programs can do this automatically for us (e.g., Google docs).

### Git

<div align="center">
![](https://swcarpentry.github.io/git-novice/fig/play-changes.svg){width=90%}
</div>


<p style="font-size: 18px;">Git tracks changes to all files and subfolders contained in the **repository** (which is just the parent folder).</p>

For text files, Git lets you see line-by-line changes:\

<p align="center">
![](./figures/git_change_to_text_file.png){width=35%}
</p>

For non-text files, Git indicates that files were changed:\

<p align="center">
![](./figures/git_change_to_nontext_file.png){width=50%}
</p>

> Git can be used locally on your computer\
> &nbsp;&nbsp;&nbsp; **AND**\
> Git can be synchronized with a server so that data & changes are backed up to the cloud.

## Using Git Locally

Git can be run via command line ([see tutorial here](https://swcarpentry.github.io/git-novice/01-basics.html)) but we will use GitHub Desktop.

<div style="background-color: var(--action-color); padding: 20px; margin-bottom: 20vh;">

#### Exercise 1.

* Download and **install GitHub Desktop** at this link: [https://github.com/apps/desktop](https://github.com/apps/desktop)

  - To complete the installation, you will also have to create an account on [GitHub.com](https://github.com/).
  
  - After you make your GitHub account, authenticate GitHub Desktop by going to\
  **File âžœ Options... âžœ Accounts    âžœ     Sign Into GitHub.com**

<p align="center">
![](./figures/git_setup_GitHub_Desktop.png){width=50%}
<br><br>
![](./figures/github_signin.png){width=30%}
<br><br>
![](./figures/github_signin2.png){width=25%}
</p>

* Download this GitHub repository to your local computer: [EvoNerd/THEE_2025reproducibility](https://github.com/EvoNerd/THEE_2025reproducibility)\
**Add âžœ Clone repository...     âžœ    URL**

<p align="center">
![](./figures/git_clone_repo.png){width=35%}
<br><br>
![](./figures/git_clone_repo_URL.png){width=60%}
</p>

* Open the "THEE_2025reproducibility" folder locally on your computer (i.e., using File Explorer for Windows, or Finder for Mac).

  - GitHub Desktop will probably save the repository to a folder in your Documents that is called "GitHub".
  
  - You can also navigate to the repository from the start page on GitHub Desktop
  
<p align="center">
![](./figures/git_navigate_to_directory.png){width=45%}
</p>
  
* Copy the R Notebook file you created before the break to the new repository.

  - **Do you see any changes on GitHub Desktop?**
  
<p align="center">
![](./figures/git_stash.png){width=40%}
</p>

</div>

GitHub Desktop automatically detects all changes in a repository and adds them to the **staging area**.

When you decide that you have completed a **stash** of work, then you **commit** the stash to the repository with a message.

<div align="center">
![](https://swcarpentry.github.io/git-novice/fig/git-staging-area.svg){width=90%}
</div>

The Git repository contains a time-series of commits. This time-series is called a **branch**.

A repository can have more than one branch, but this makes it more difficult to manage. By convention the main branch of a repository is called `main`.

<div style="background-color: var(--action-color); padding: 20px; margin-top: 20vh; margin-bottom: 20vh;">

#### Exercise 2.

* Navigate to the GitHub Desktop staging area and commit the R Notebook file you copy/pasted to the repository.

  - GitHub Desktop may prompt you to push to origin or to create a fork -- do **NOT** do either of those things at this time!

<p align="center">
![](./figures/git_commit.png){width=30%}
</p>
  
* Rename the R Notebook file with your firstname and commit this change too.

<p align="center">
![](./figures/git_change_doc_name.png){width=30%}
</p>

* Navigate to the history tab. Can you figure out how to tag the most recent commit?

<p align="center">
![](./figures/git_create_tag.png){width=40%}
</p>

</div>

Some commits are especially important (*e.g.*, the last time your code worked properly, the version of your results that you presented for the final presentation, *etc.*)

**Tags** let you label these important commits.

It's easier to find and return to a tagged commit.

<div style="background-color: var(--action-color); padding: 20px;">

#### Exercise 3.

* Tag your most recent commit as `<your firstname's> code`.

<p align="center">
![](./figures/git_tag.png){width=30%}
</p>

* Open your R Notebook file, delete all of its contents, and save the file. *Don't worry! Git will be able to retrieve it for you!*

* Commit the change.

<p align="center">
![](./figures/git_delete_file_contents.png){width=50%}
</p>

* Navigate to the history tab. Can you figure out how to revert the changes made by the most recent commit?

  - **What happens when you revert changes in commit?**

<p align="center">
![](./figures/git_revert_changes.png){width=60%}
<br><br>
![](./figures/git_reverted_change.png){width=30%}
</p>

</div>




## Using Git with a Server

Google Docs lets us work collaboratively on the same document.

GitHub pairs the functionality of Git with a server, so we can work collaboratively on the files in a repository.

By considering each change (**commit**) to a repository as separate, Git can keep track of different versions of the same repository.

<p align="center">
![](https://swcarpentry.github.io/git-novice/fig/versions.svg){width=50%}
</p>

Then, the different versions can be **merged** back together.

<p align="center">
![](https://swcarpentry.github.io/git-novice/fig/merge.svg){width=50%}
</p>

Uploading your local commits and merging them *to the server* is called **pushing**.

Downloading the most recent commits *from the server* and merging them locally is called **pulling**.

You can also just **fetch**: ask Git to check if there are any new commits on the server. This will neither upload or download any changes from/to your local computer.

<div style="background-color: var(--action-color); padding: 20px;">

#### Exercise 4.

* Send Hermina your GitHub username or email. You should soon receive an email invite to collaborate on the repository.

<p align="center">
![](./figures/github_invite_to_collab.png){width=60%}
<br><br>
![](./figures/github_invite_to_collab2.png){width=30%}
</p>


* **Push** your local changes to GitHub's server by clicking "Push to Origin".

<p align="center">
![](./figures/github_push.png){width=80%}
</p>

* If you try to push but GitHub finds that your local computer does not have the latest commits, it will automatically ask you to **pull** so your local computer is up-to-date.

<p align="center">
![](./figures/github_fetch.png){width=60%}
<br><br>
![](./figures/github_pull.png){width=80%}
</p>

* Keep trying to push until you have successfully synchronized your R Notebook file with origin.

* Keep trying to fetch and pull until you have have downloaded all the R Notebook files of the whole class to your local computer.

* Check out how many tags we have now on the repository! You can easily find tagged commits via the GitHub website.

<p align="center">
![](./figures/github_tags.png){width=50%}
</p>

</div>

For text documents, Git keeps track of changes based on the name and line number of a document.

If different commits modify the same line of the same document, Git does not know how to merge. This creates a **conflict**.

<p align="center">
![](https://swcarpentry.github.io/git-novice/fig/conflict.svg){width=90%}
</p>

Git(Hub) will try its best to automatically resolve conflicts for you. When it finds a conflict that it cannot figure out how you it should be resolved, it will ask you to resolve it manually.

Committing your changes often and synchronizing them with the server reduces the likelihood of creating conflicts.

<div style="background-color: var(--action-color); padding: 20px;">

#### *Bonus Exercise*

* Make a change to the R Notebook file called `reproducibility.Rmd`. Commit the change and push it to GitHub.

  - Did this create a conflict or was Git able to merge it successfully?
  
<p align="center">
![](./figures/github_conflict.png){width=80%}
</p>

  
* Keep making changes, committing, and pushing them until we create a conflict. Let's practice together to merge the conflicts.

* Conflicts can be resolved by telling Git to use all the changes from one commit and drop all the changes from the other commit\
*e.g., we can keep **either** the commit from local main **or** that from GitHub (origin/main)*

<p align="center">
![](./figures/github_resolve_conflict_auto.png){width=80%}
</p>

* If we want to keep some parts from **both** of the conflicting commits, we need to open the document in a code or text editor and manually resolve the conflict. Here's what a conflict looks like in Visual Studio Code. It is resolved manually simply by clicking on the change you want to accept.

<p align="center">
![](./figures/github_resolve_conflict_manual.png){width=100%}
</p>

* Conflicts are scary but we can easily manage them once we learn how ðŸ˜Œ

  - **How can you avoid conflicts?**

<p align="center">
![](./figures/github_resolved_conflict.png){width=60%}
</p>

</div>

# Summary

* Automated version control is useful.

  - You will have to use GitHub during the research practical
  
  - (other options exist. Servers: *GitLab*. Programs: *mercurial, CVS, Subversion*.)

* Git can be used locally for version control.

* Git can be used with an online server (e.g., GitHub)

  - we experimented with how GitHub helps backups & collaboration
  
  - GitHub can also be used to host & distribute projects\
  *e.g., [this website is hosted on GitHub](https://github.com/EvoNerd/THEE_2025reproducibility) on the branch called "website"*

* Coupling Git with an online server makes reproducibility easy:


<div align="center">
  Hoard
  <img src="https://lh3.googleusercontent.com/blogger_img_proxy/AEn0k_t3BbtzxyAYqbfzPrSXHDX3IeUrRhU1jPOjjOAkW9k0k8IoG8cmFmbm09_SFb0YM7BZrY6Ji_JDYu9zrZQh1PYXO43WmHGH8S04Ib6NHl5UvVru5mKRtas-k50qmohmAw=s0-d" style="width: 20%; margin-left: 5vw;" />
</div>

<div align="center">
  <img src="https://assets.myket.ir/icons/large/com.appattitude.shareapp_f6f6c04e-10fb-4303-a952-0e783d3bfb38.png" style="width: 20%; margin-right: 5vw;" />
  Share
</div>

* How does GitHub help us with the other reproducibility principles?

<div align="center">
  Annotate
  <img src="https://libapps-au.s3-ap-southeast-2.amazonaws.com/accounts/1771/images/annotate.png" style="width: 20%; margin-left: 5vw;" />
</div>

<div align="center">
  <img src="https://images.lumacdn.com/cdn-cgi/image/format=auto,fit=cover,dpr=2,background=white,quality=75,width=400,height=400/event-covers/yo/f21e0c96-387b-4142-be2b-cb5da5fbc84f.png" style="width: 20%; margin-right: 5vw;" />
  Automate
</div>